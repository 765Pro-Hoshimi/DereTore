# 简单操作说明

## Ribbon

### 编辑

在编辑模式下可以切换编辑模式，这个模式用于创建滑条、双押等特殊note。

### 小节和音符

小节和音符的基本操作。

### 预览

预计以后会在软件内预览。现在请使用 *ScoreViewer*（`CgssScoreViewer.exe`，附于发行压缩包中）加载预览。

### 音乐

预计以后会在软件内直接生成 ACB。现在请使用 *MusicToolchain*（`MTC.exe`，附于发行压缩包中）创建 ACB。

### 谱面信息

切换不同难度谱面；调整**所有谱面**的**全局** BPM；调整**所有谱面**相对音乐起始偏移时间（秒）。

### 视图

缩放编辑器细分程度。最高可以到每节拍24分。

### 构建

将来的构建命令，现在暂未完全实现。

### 转换

导出当前谱面（可以在未保存的情况下进行）到 CSV 文件；从老版本的存档中导入工程（会自动修正细分级别）。

## 谱面编辑

添加小节后，编辑区会显示小节。

- 双击小节中无note的格点添加note（无视编辑模式）。
- 按住 `Shift` 滚动滚轮可以快速滚动。
- 按住 `Ctrl` 滚动滚轮可以缩放。
- 如果跨小节的note长押难以连接，可以按住鼠标按键*并*滚动滚轮（`Shift` 仍然有效）。
- note和小节周围发光表示已经选中。
- `Delete` 键快速删除已选择的note（也可以用 Ribbon）。

切换到对应的编辑模式：

- 选择：基本的选择功能，不会修改note的连接属性。
- 双押（蓝色）：在同一行上的两个note，在一个note上按下并拖放到另一个上创建双押。注意这个操作目前并不会自动完成（即，自动认为在同一行上的两个note就是双押）。
- 滑条（紫色）：在不同行不同列上的一组note，在其中一个note上按下并拖放到另一个上创建滑条。滑条起始、结束顺序和滑动方向会自动识别。在滑条的一端继续添加滑条可以添加为一组滑条。
  - 创建组时并不会更改已有的滑动顺序，请按顺序添加。
- 长押（黄色）：在同一列上的两个note，在一个note上按下并拖放到另一个上创建长押。
  - 双击长押的抬起note可以切换note结束时的滑动方向：无滑动、向左、向右。
- 清除：单击一个note清除该note的所有特殊连接属性；在一个note上按下并拖放到另一个则清除二者对外部和相互之间**所有的**连接。

每个note的连接属性在它其中个3角上有所表示，有对应颜色的小圆圈则该note有该属性的对外连接。（人工查错使用）

选中一个或多个note后，选择“Note” Ribbon 组中的“起始位置”命令可以修改所选择的note的起始位置。要注意的是，CGSS中有一条规则，长押抬起的note一定和按下的note起始和终止位置都一致。所以 Director 会忽略对长押抬起note的起始位置设置，并在设置长押按下note起始位置后自动调整对应的抬起note的起始位置。

> **创作完成后，不要忘了保存！**\_(:з」∠)\_

*MusicToolchain* 和 *ScoreViewer* 的使用方式很简单，自己摸索一下很快就知道了。

## 替换曲目

使用“工具”-“导出到 BDB 并替换”快速导出并替换所选择 BDB 中的谱面，自动导出到**制谱时所选择的难度**，如果没有对应难度存在则会报错。

在接下来的方法中，假设你用 `Resources/Testing/musicscores_m001.bdb`（お願い！シンデレラ）进行了替换。

1. 准备 `song_1001.acb`，这可以通过 *MusicToolchain* 制作。注意**制作时曲目编号填写“1001”**。制作完成后直接改名为 `song_1001.acb.lz4`（不要压缩）。
2. 将 `song_1001.acb.lz4` 放到 IdolProxy 的 `dl/resources/High/Sound/Common/l`（看清楚是小写“l”不是数字“1”）目录下，如果没有这个目录则需要新建。
3. 将替换后的 `musicscores_m001.bdb` 拖放到工具中的 `LZ4.exe` 上，生成 `musicscores_m001.bdb.lz4`。
4. 将 `musicscores_m001.bdb.lz4` 放到 IdolProxy 的 `dl/resources/Generic` 目录下。
5. 启动 IdolProxy，进入游戏。此时《お願い！シンデレラ》的曲目，和对应难度谱面应该已经被替换并可以自由玩。
